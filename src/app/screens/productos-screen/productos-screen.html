<div class="app-container">
  <div class="header-home">
    <app-navbar></app-navbar>
  </div>

<section class="carrusel-section">
    <div class="carrusel-wrapper">
  <h2 class="section-title">Próximos a caducar</h2>

  <div class="carrusel-background">
    <mat-tab-group [(selectedIndex)]="carouselIndex" animationDuration="1000ms">
      <mat-tab *ngFor="let img of carruselImagenes">
        <ng-template matTabContent>
          <img [src]="img" alt="Imagen carrusel" class="carousel-image" />
        </ng-template>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>

  <div id="proximos-section" class="proximos-overlay">
    <div class="card-grid">
      <mat-card class="producto-card con-fecha" *ngFor="let p of proximosAVencer">
        <mat-card-header class="card-header">
          <mat-card-title>{{ p.nombre }}</mat-card-title>
          <mat-card-subtitle>{{ p.categoria }}</mat-card-subtitle>
        </mat-card-header>

        <div class="image-container">
          <img [src]="p.imagen" [alt]="p.nombre" />
        </div>

        <mat-card-content>
          <p>Caduca: {{ p.caducidad | date:'dd/MM/yyyy' }}</p>
        </mat-card-content>

        <mat-card-actions class="card-footer">
          <div class="boton-wrapper">
            <button mat-raised-button class="boton-detalles" (click)="verProducto(p)">
              Detalles
            </button>
          </div>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</section>

  <section class="almacen-section">
    <h2 class="section-title">Almacén</h2>
     <ng-container *ngFor="let categoria of categorias">
      <h3>{{ categoria | titlecase }}</h3>
      <div class="card-grid">
        <mat-card class="producto-card sin-fecha" *ngFor="let item of almacen[categoria]">
          <mat-card-header class="card-header">
            <mat-card-title>{{ item.nombre }}</mat-card-title>
          </mat-card-header>

          <div class="image-container">
            <img [src]="item.imagen" [alt]="item.nombre" />
          </div>

          <mat-card-actions class="card-footer">
            <div class="boton-wrapper">
              <button mat-raised-button class="boton-detalles" (click)="verProducto(item)">
                Detalles
              </button>
            </div>
          </mat-card-actions>
        </mat-card>
      </div>
    </ng-container>
  </section>

  <footer class="footer">
    <div class="footer-content">
      <p>Almacén Licor S.A. de C.V.</p>
      <p>Contacto: contacto@almacenlicor.mx</p>
      <p>Dirección: Calle 123, Puebla, México</p>
      <p>© 2025 Todos los derechos reservados</p>
    </div>
  </footer>

  <!-- Bloque de resultados de búsqueda -->
  <div *ngIf="searchQuery" class="search-results">
    <div class="result-header d-flex align-items-center gap-3">
      <i class="fas fa-search fa-2x" style="color:#7c1459"></i>
      <div>
        <div class="small-label">Resultado de</div>
        <h2 class="search-title" style="color:#7c1459; margin:0; font-size:1.6rem;">{{ searchQuery }}</h2>
      </div>
    </div>

    <div class="card-grid" *ngIf="(licores ?? []).length > 0">
      <mat-card class="producto-card" *ngFor="let l of licores ?? []">
        <mat-card-header class="card-header">
          <mat-card-title>{{ l.nombre }}</mat-card-title>
          <mat-card-subtitle>{{ l.categoria }}</mat-card-subtitle>
        </mat-card-header>
        <div class="image-container">
          <img [src]="l.imagen" [alt]="l.nombre" />
        </div>
        <mat-card-actions class="card-footer">
          <div class="boton-wrapper">
            <button mat-raised-button class="boton-detalles" (click)="verProducto(l)">Detalles</button>
          </div>
        </mat-card-actions>
      </mat-card>
    </div>

    <div *ngIf="!loading && (!licores || licores.length === 0)">
      <p>No se encontraron resultados para "{{ searchQuery }}".</p>
    </div>
  </div>
</div>
